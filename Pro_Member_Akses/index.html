<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>UMT Pro Command Center</title>
    <script>
      MathJax = {
        tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=Inter:wght@400;600;700&display=swap');
        :root {
            --bg-main: #0D1117; --bg-panel: #161B22; --border-color: #30363D;
            --text-primary: #C9D1D9; --text-secondary: #8B949E; --accent-cyan: #2F81F7;
            --accent-green: #39D353; --accent-red: #F85149;
        }
        body { background-color: var(--bg-main); color: var(--text-primary); font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'Fira Code', monospace; }
        .panel { background-color: var(--bg-panel); border: 1px solid var(--border-color); border-radius: 0.75rem; padding: 1.5rem; }
        .bottom-nav-link.active { color: var(--accent-cyan); }
        .sidebar-link.active { background-color: #30363D; color: white; }
        .card-item { background-color: #21262D; transition: transform 0.2s; cursor: pointer; }
        .card-item:hover { transform: translateY(-4px); background-color: #30363D; }
        .quiz-option { border: 2px solid var(--border-color); }
        .quiz-option:hover { border-color: var(--accent-cyan); }
        .quiz-option.selected { border-color: var(--accent-cyan); background-color: rgba(47, 129, 247, 0.2); }
        .correct-answer { background-color: rgba(57, 211, 83, 0.1); border-left: 4px solid var(--accent-green); }
        .wrong-answer { background-color: rgba(248, 81, 73, 0.1); border-left: 4px solid var(--accent-red); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .nav-btn:disabled { background-color: #30363D; color: #8B949E; cursor: not-allowed; }

        @keyframes slideInRight { from { opacity: 0; transform: translateX(100%); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; transform: translateY(-20px); } }
        .toast-in { animation: slideInRight 0.5s forwards; }
        .toast-out { animation: fadeOut 0.5s forwards; }
/* ================================================= */
/* ==  STYLE UNTUK HALAMAN FORUM UMT              == */
/* ================================================= */

.forum-container {
    background-color: var(--bg-panel);
    border: 1px solid var(--border-color);
    border-radius: 0.75rem; /* Sesuai dengan style .panel */
    padding: 2.5rem 2rem;
    max-width: 800px;
    margin: 2rem auto;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

/* Bagian Judul dan Deskripsi Awal */
.intro h1 {
    font-size: 2.25rem; /* 36px */
    font-weight: 700;
    color: var(--accent-cyan);
    margin-bottom: 0.75rem;
}

.intro p {
    color: var(--text-secondary);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
}

/* Bagian Link Komunitas */
.community-links {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border-color);
}

.community-links h2 {
    font-size: 1.25rem; /* 20px */
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1.5rem;
}

/* Tombol untuk Join Komunitas */
.community-btn {
    text-decoration: none;
    color: white;
    font-weight: bold;
    padding: 0.75rem 1.5rem; /* py-3 px-6 */
    border-radius: 9999px; /* rounded-full */
    display: inline-flex;
    align-items: center;
    gap: 0.75rem; /* gap-3 */
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.community-btn i {
    font-size: 1.25rem;
}

.community-btn:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
}

.whatsapp-btn {
    background-color: #25D366; /* Warna resmi WhatsApp */
}
.whatsapp-btn:hover {
    background-color: #1DAA54;
}

.telegram-btn {
    background-color: #229ED9; /* Warna resmi Telegram */
}
.telegram-btn:hover {
    background-color: #1C84B3;
}

/* Teks kecil di bawah tombol */
.community-links .subtext {
    color: var(--text-secondary);
    margin-top: 1.5rem;
    font-size: 0.875rem;
}

/* Penyesuaian untuk layar mobile */
@media (max-width: 768px) {
    .intro h1 {
        font-size: 1.75rem; /* Perkecil judul di mobile */
    }
    .forum-container {
        padding: 2rem 1rem;
        margin: 1rem;
    }
    .community-btn {
        width: 100%; /* Buat tombol memenuhi lebar di mobile */
        justify-content: center;
    }
}

/* Bagian Bank Soal  */
 @media (max-width: 640px) {
     #single-explanation-container > div {
         padding: 1rem;
         margin-bottom: 1rem;
         overflow-x: auto; /* Tambahkan scroll horizontal jika konten terlalu lebar */
     }

     #single-explanation-container .text-lg {
         font-size: 1rem;
     }

     #single-explanation-container .text-sm {
         font-size: 0.875rem;
     }

     #single-explanation-container .font-bold {
         font-size: 1rem;
     }

     .flex.justify-between.items-center.mt-8 {
         flex-direction: column;
         gap: 0.75rem;
     }

     .flex.justify-between.items-center.mt-8 > button {
         width: 100%;
     }
 }
    </style>
</head>
<body class="text-white">

    <div class="flex min-h-screen">
        <aside class="fixed bottom-0 left-0 z-50 w-full h-16 bg-[var(--bg-panel)] border-t border-[var(--border-color)] 
                       md:relative md:w-64 md:h-screen md:flex md:flex-col md:border-t-0 md:border-r md:p-6">
            <h1 class="hidden text-xl font-bold mb-10 text-cyan-400 md:block md:text-2xl">UMT Pro</h1>
            <nav id="sidebar-nav" class="no-scrollbar flex overflow-x-auto h-full md:flex-col md:space-y-4 md:h-auto">
                <div class="flex flex-nowrap items-center justify-start gap-2 px-2 md:flex-col md:items-stretch md:gap-0 md:px-0">
                    <a href="#" class="sidebar-link bottom-nav-link flex-shrink-0 w-20 flex flex-col items-center justify-center p-2 text-center text-gray-400 rounded-lg hover:text-white md:w-full md:flex-row md:justify-start md:gap-4 md:hover:bg-gray-700" onclick="event.preventDefault(); navigateTo('dashboard', this)">
                        <i class="fa-solid fa-chart-pie text-lg md:w-6"></i><span class="text-xs mt-1 md:text-base md:mt-0">Dashboard</span>
                    </a>
                    <a href="#" class="sidebar-link bottom-nav-link flex-shrink-0 w-20 flex flex-col items-center justify-center p-2 text-center text-gray-400 rounded-lg hover:text-white md:w-full md:flex-row md:justify-start md:gap-4 md:hover:bg-gray-700" onclick="event.preventDefault(); navigateTo('materi', this)">
                        <i class="fa-solid fa-book text-lg md:w-6"></i><span class="text-xs mt-1 md:text-base md:mt-0">Materi</span>
                    </a>
                    <a href="#" class="sidebar-link bottom-nav-link flex-shrink-0 w-20 flex flex-col items-center justify-center p-2 text-center text-gray-400 rounded-lg hover:text-white md:w-full md:flex-row md:justify-start md:gap-4 md:hover:bg-gray-700" onclick="event.preventDefault(); navigateTo('bank_soal', this)">
                        <i class="fa-solid fa-list-check text-lg md:w-6"></i><span class="text-xs mt-1 md:text-base md:mt-0">Bank Soal</span>
                    </a>
                    <a href="#" class="sidebar-link bottom-nav-link flex-shrink-0 w-20 flex flex-col items-center justify-center p-2 text-center text-gray-400 rounded-lg hover:text-white md:w-full md:flex-row md:justify-start md:gap-4 md:hover:bg-gray-700" onclick="event.preventDefault(); navigateTo('video', this)">
                        <i class="fa-solid fa-video text-lg md:w-6"></i><span class="text-xs mt-1 md:text-base md:mt-0">Video</span>
                    </a>
                    <a href="#" class="sidebar-link bottom-nav-link flex-shrink-0 w-20 flex flex-col items-center justify-center p-2 text-center text-gray-400 rounded-lg hover:text-white md:w-full md:flex-row md:justify-start md:gap-4 md:hover:bg-gray-700" onclick="event.preventDefault(); navigateTo('forum', this)">
                        <i class="fa-solid fa-comments text-lg md:w-6"></i><span class="text-xs mt-1 md:text-base md:mt-0">Forum</span>
                    </a>
                    <a href="#" class="sidebar-link bottom-nav-link flex-shrink-0 w-20 flex flex-col items-center justify-center p-2 text-center text-gray-400 rounded-lg hover:text-white md:w-full md:flex-row md:justify-start md:gap-4 md:hover:bg-gray-700" onclick="event.preventDefault(); navigateTo('pengaturan', this)">
                        <i class="fa-solid fa-user-gear text-lg md:w-6"></i><span class="text-xs mt-1 md:text-base md:mt-0">Pengaturan</span>
                    </a>
                </div>
            </nav>
            <div class="hidden mt-auto md:block">
                <button onclick="logout()" class="w-full bg-red-800 hover:bg-red-700 text-white py-2 px-3 rounded">
                    <i class="fa-solid fa-right-from-bracket"></i><span class="md:inline"> Logout</span>
                </button>
            </div>
        </aside>

        <main id="app-content" class="flex-1 p-6 space-y-6 pb-20 md:pb-6 overflow-x-hidden"></main>
    </div>

    <div id="toast-container" class="fixed top-5 right-5 z-[100] space-y-3 w-80"></div>

<script>
// =================================================================================
// BAGIAN 0: KONFIGURASI DAN DATA MASTER (GLOBAL)
// =================================================================================
const allContentData = {
    materi: [
        { id: 'materi_1', title: 'Materi Aljabar', type: 'Materi' },
        { id: 'materi_2', title: 'Materi Kalkulus', type: 'Materi' }
    ],
    video: [
        { id: 'video_1', title: 'Video Pembahasan Vektor', type: 'Video' }
    ],
    bankSoal: [
        {
        id: 'pas-matematika-1',
        category: "PAS",
        title: 'Latihan Penilaian Akhir Semester (PAS) - Part 1',
        subject: 'Matematika',
        totalQuestions: 40,
        questions: [
            {
                questionText: 'Himpunan penyelesaian dari persamaan x² = 16 adalah:',
                options: ['A. {4, –4}', 'B. {–4, 4}', 'C. {3, –4}', 'D. {–3, 4}', 'E. {3, –3}'],
                correctAnswer: 'A. {4, –4}',
                explanation: 'Untuk mencari nilai x, kita mengakarkan kedua sisi. Akar kuadrat dari sebuah bilangan positif selalu memiliki dua hasil, yaitu positif dan negatif. Akar dari 16 adalah 4 dan -4, karena 4² = 16 dan (–4)² = 16. Jadi, himpunan penyelesaiannya adalah {4, -4}.'
            },
            {
                questionText: 'Nilai x yang memenuhi persamaan 2x – 3 = 5 adalah:',
                options: ['A. 2', 'B. 3', 'C. 4', 'D. 5', 'E. 6'],
                correctAnswer: 'C. 4',
                explanation: 'Untuk mencari x, kita pisahkan variabel x di satu sisi. Pindahkan –3 ke kanan menjadi +3, sehingga 2x = 5 + 3. Maka, 2x = 8. Terakhir, bagi kedua sisi dengan 2, sehingga x = 8 / 2 = 4.'
            },
            {
                questionText: 'Jika f(x) = 3x + 2, maka nilai f(4) adalah:',
                options: ['A. 10', 'B. 12', 'C. 14', 'D. 16', 'E. 18'],
                correctAnswer: 'C. 14',
                explanation: 'Untuk mencari nilai f(4), kita substitusikan (gantikan) setiap "x" dalam fungsi f(x) dengan angka 4. Maka, f(4) = 3(4) + 2 = 12 + 2 = 14.'
            },
            {
                questionText: 'Jika diketahui g(x) = x² – 2x + 1, maka nilai g(2) adalah:',
                options: ['A. 0', 'B. 1', 'C. 2', 'D. 3', 'E. 4'],
                correctAnswer: 'B. 1',
                explanation: 'Substitusikan nilai x = 2 ke dalam fungsi g(x). Maka, g(2) = (2)² – 2(2) + 1 = 4 – 4 + 1 = 1.'
            },
            {
                questionText: 'Diketahui himpunan A = {1, 2, 3, 4, 5}. Banyaknya himpunan bagian dari A adalah:',
                options: ['A. 10', 'B. 16', 'C. 25', 'D. 32', 'E. 64'],
                correctAnswer: 'D. 32',
                explanation: 'Banyaknya himpunan bagian dari sebuah himpunan dapat dihitung dengan rumus 2ⁿ, di mana "n" adalah jumlah anggota himpunan tersebut. Himpunan A memiliki 5 anggota (n=5). Jadi, banyaknya himpunan bagian adalah 2⁵ = 2 × 2 × 2 × 2 × 2 = 32.'
            },
            {
                questionText: 'Jika x² – 5x + 6 = 0, maka akar-akarnya adalah:',
                options: ['A. x = 2 atau x = 3', 'B. x = –2 atau x = –3', 'C. x = 1 atau x = 6', 'D. x = –1 atau x = –6', 'E. x = 0 atau x = 5'],
                correctAnswer: 'A. x = 2 atau x = 3',
                explanation: 'Kita mencari dua bilangan yang jika dikalikan hasilnya 6 dan jika dijumlahkan hasilnya -5. Bilangan tersebut adalah -2 dan -3. Sehingga persamaan dapat difaktorkan menjadi (x – 2)(x – 3) = 0. Maka, akar-akarnya adalah x = 2 atau x = 3.'
            },
            {
                questionText: 'Jika h(x) = x³ – 3x² + 4x – 12, maka nilai h(3) adalah:',
                options: ['A. 0', 'B. 3', 'C. -3', 'D. 6', 'E. -6'],
                correctAnswer: 'A. 0',
                explanation: 'Substitusikan x = 3 ke dalam fungsi h(x). h(3) = (3)³ – 3(3)² + 4(3) – 12 = 27 – 3(9) + 12 – 12 = 27 – 27 + 0 = 0.'
            },
            {
                questionText: 'Jika f(x) = 2x + 5 dan g(x) = x² – 4, maka (f o g)(x) adalah:',
                options: ['A. 2x² – 3', 'B. 2x² + 1', 'C. 2x² – 8', 'D. 2x² – 3x + 5', 'E. 2x² + 5'],
                correctAnswer: 'A. 2x² – 3',
                explanation: 'Fungsi komposisi (f o g)(x) berarti memasukkan fungsi g(x) ke dalam f(x). (f o g)(x) = f(g(x)) = f(x² – 4). Gantikan "x" pada f(x) dengan (x² – 4). f(x² – 4) = 2(x² – 4) + 5 = 2x² – 8 + 5 = 2x² – 3.'
            },
            {
                questionText: 'Jika f(x) = x² – 3x + 2, maka nilai f(1) + f(2) adalah:',
                options: ['A. 0', 'B. 1', 'C. 2', 'D. 3', 'E. 4'],
                correctAnswer: 'A. 0',
                explanation: 'Hitung nilai f(1) dan f(2) secara terpisah. f(1) = (1)² – 3(1) + 2 = 1 – 3 + 2 = 0. f(2) = (2)² – 3(2) + 2 = 4 – 6 + 2 = 0. Maka, f(1) + f(2) = 0 + 0 = 0.'
            },
            {
                questionText: 'Himpunan penyelesaian dari pertidaksamaan x² – 4x ≤ 0 adalah:',
                options: ['A. {x | 0 ≤ x ≤ 4}', 'B. {x | x < 0 atau x > 4}', 'C. {x | x ≥ 4}', 'D. {x | x > 0 dan x < 4}', 'E. {x | x ≤ 0}'],
                correctAnswer: 'A. {x | 0 ≤ x ≤ 4}',
                explanation: 'Faktorkan pertidaksamaan: x(x – 4) ≤ 0. Pembuat nol adalah x = 0 dan x = 4. Gunakan garis bilangan untuk menguji interval. Karena tandanya "≤" (lebih kecil dari), kita ambil interval yang bernilai negatif, yaitu di antara 0 dan 4. Jadi, solusinya 0 ≤ x ≤ 4.'
            },
            {
                questionText: 'Jika f(x) = 5x – 7 dan g(x) = x² + 3x, maka nilai dari (f o g)(2) adalah:',
                options: ['A. 33', 'B. 43', 'C. 53', 'D. 63', 'E. 73'],
                correctAnswer: 'B. 43',
                explanation: 'Untuk mencari (f o g)(2), pertama hitung g(2). g(2) = (2)² + 3(2) = 4 + 6 = 10. Kemudian, masukkan hasilnya ke dalam f(x). f(10) = 5(10) – 7 = 50 – 7 = 43.'
            },
            {
                questionText: 'Jika h(x) = x² – 2x + 1, maka himpunan penyelesaian dari h(x) = 0 adalah:',
                options: ['A. {0}', 'B. {1}', 'C. {2}', 'D. {3}', 'E. {4}'],
                correctAnswer: 'B. {1}',
                explanation: 'Persamaan h(x) = 0 menjadi x² – 2x + 1 = 0. Persamaan ini bisa difaktorkan menjadi (x – 1)(x – 1) = 0 atau (x – 1)² = 0. Maka, satu-satunya solusi adalah x = 1. Himpunan penyelesaiannya adalah {1}.'
            },
            {
                questionText: 'Diketahui persamaan kuadrat x² – 5x + 6 = 0. Nilai diskriminannya adalah:',
                options: ['A. 1', 'B. 4', 'C. 9', 'D. 16', 'E. 25'],
                correctAnswer: 'A. 1',
                explanation: 'Rumus diskriminan (D) adalah D = b² – 4ac. Dari persamaan, a = 1, b = –5, dan c = 6. Maka, D = (–5)² – 4(1)(6) = 25 – 24 = 1.'
            },
            {
                questionText: 'Jika aₙ = 3n – 2, maka suku ke-5 dari barisan tersebut adalah:',
                options: ['A. 10', 'B. 11', 'C. 12', 'D. 13', 'E. 14'],
                correctAnswer: 'D. 13',
                explanation: 'Untuk mencari suku ke-5 (a₅), substitusikan n = 5 ke dalam rumus barisan. a₅ = 3(5) – 2 = 15 – 2 = 13.'
            },
            {
                questionText: 'Hasil dari ∑ₖ₌₁⁵ (2k + 1) adalah:',
                options: ['A. 25', 'B. 30', 'C. 35', 'D. 40', 'E. 45'],
                correctAnswer: 'C. 35',
                explanation: 'Notasi sigma ini berarti kita menjumlahkan suku (2k + 1) dari k=1 sampai k=5. (2(1)+1) + (2(2)+1) + (2(3)+1) + (2(4)+1) + (2(5)+1) = 3 + 5 + 7 + 9 + 11 = 35.'
            },
            {
                questionText: 'Jika diketahui log₂ 8 = x, maka nilai x adalah:',
                options: ['A. 1', 'B. 2', 'C. 3', 'D. 4', 'E. 5'],
                correctAnswer: 'C. 3',
                explanation: 'log₂ 8 bertanya, "2 pangkat berapa yang hasilnya 8?". Jawabannya adalah 3, karena 2³ = 8. Jadi, x = 3.'
            },
            {
                questionText: 'Diketahui sin 30° dan cos 60°, maka hasil dari sin 30° + cos 60° adalah:',
                options: ['A. 1/2', 'B. 1/√2', 'C. 1', 'D. √3/2', 'E. 2'],
                correctAnswer: 'C. 1',
                explanation: 'Nilai dari sudut istimewa sin 30° adalah 1/2. Nilai dari cos 60° juga 1/2. Maka, sin 30° + cos 60° = 1/2 + 1/2 = 1.'
            },
            {
                questionText: 'Jika panjang sisi sebuah kubus adalah 4 cm, maka volumenya adalah:',
                options: ['A. 32 cm³', 'B. 48 cm³', 'C. 64 cm³', 'D. 80 cm³', 'E. 100 cm³'],
                correctAnswer: 'C. 64 cm³',
                explanation: 'Volume kubus dihitung dengan rumus V = s³, di mana "s" adalah panjang sisi. Jadi, V = (4 cm)³ = 4 × 4 × 4 = 64 cm³.'
            },
            {
                questionText: 'Diketahui A = {x | 1 ≤ x ≤ 5} dan B = {x | 3 ≤ x ≤ 7}. Himpunan A ∩ B adalah:',
                options: ['A. {1, 2, 3}', 'B. {3, 4, 5}', 'C. {4, 5, 6}', 'D. {2, 3, 4}', 'E. {5, 6, 7}'],
                correctAnswer: 'B. {3, 4, 5}',
                explanation: 'A ∩ B berarti irisan (intersection), yaitu anggota yang ada di himpunan A sekaligus di himpunan B. A = {1, 2, 3, 4, 5} dan B = {3, 4, 5, 6, 7}. Anggota yang sama di kedua himpunan adalah {3, 4, 5}.'
            },
            {
                questionText: 'Jika tan x = 3/4, maka nilai sin x adalah:',
                options: ['A. 3/5', 'B. 4/5', 'C. 3/2', 'D. 5/4', 'E. 5/3'],
                correctAnswer: 'A. 3/5',
                explanation: 'Gunakan segitiga siku-siku. tan x = depan/samping = 3/4. Sisi miring (hipotenusa) dihitung dengan Pythagoras: √(3² + 4²) = √(9 + 16) = √25 = 5. Maka, sin x = depan/miring = 3/5.'
            },
            {
                questionText: 'Jika diketahui f(x) = 3x – 2 dan g(x) = x² + x, maka hasil dari (g o f)(2) adalah:',
                options: ['A. 10', 'B. 12', 'C. 14', 'D. 16', 'E. 20'],
                correctAnswer: 'E. 20',
                explanation: 'Untuk mencari (g o f)(2), pertama hitung f(2). f(2) = 3(2) – 2 = 6 – 2 = 4. Kemudian, masukkan hasilnya ke g(x). g(4) = (4)² + 4 = 16 + 4 = 20.'
            },
            {
                questionText: 'Jika diketahui x² + px + 12 = 0 memiliki akar 3 dan 4, maka nilai p adalah:',
                options: ['A. -7', 'B. -6', 'C. -5', 'D. -4', 'E. -3'],
                correctAnswer: 'A. -7',
                explanation: 'Dalam persamaan kuadrat ax² + bx + c = 0, jumlah akar (x₁ + x₂) = -b/a. Di sini, x₁=3, x₂=4, a=1, b=p. Maka, 3 + 4 = -p/1. Jadi, 7 = -p, yang berarti p = -7.'
            },
            {
                questionText: 'Jika log₃ 27 = x, maka nilai x adalah:',
                options: ['A. 1', 'B. 2', 'C. 3', 'D. 4', 'E. 5'],
                correctAnswer: 'C. 3',
                explanation: 'Logaritma log₃ 27 bertanya, "3 pangkat berapa yang hasilnya 27?". Jawabannya adalah 3, karena 3³ = 3 × 3 × 3 = 27. Jadi, x = 3.'
            },
            {
                questionText: 'Hasil dari ∑ₖ₌₁⁴ (3k + 2) adalah:',
                options: ['A. 32', 'B. 34', 'C. 36', 'D. 38', 'E. 40'],
                correctAnswer: 'D. 38',
                explanation: 'Kita menjumlahkan suku (3k + 2) dari k=1 sampai k=4. (3(1)+2) + (3(2)+2) + (3(3)+2) + (3(4)+2) = 5 + 8 + 11 + 14 = 38.'
            },
            {
                questionText: 'Jika aₙ = 2n + 1, maka suku ke-6 dari barisan tersebut adalah:',
                options: ['A. 11', 'B. 12', 'C. 13', 'D. 14', 'E. 15'],
                correctAnswer: 'C. 13',
                explanation: 'Untuk mencari suku ke-6 (a₆), substitusikan n = 6 ke dalam rumus barisan. a₆ = 2(6) + 1 = 12 + 1 = 13.'
            },
            {
                questionText: 'Jika diketahui panjang diagonal sisi sebuah kubus adalah 6√2 cm, maka panjang rusuk kubus tersebut adalah:',
                options: ['A. 4 cm', 'B. 5 cm', 'C. 6 cm', 'D. 7 cm', 'E. 8 cm'],
                correctAnswer: 'C. 6 cm',
                explanation: 'Rumus diagonal sisi kubus adalah s√2, di mana "s" adalah panjang rusuk. Diketahui diagonal sisinya 6√2. Maka, s√2 = 6√2. Dengan membagi kedua sisi dengan √2, kita dapatkan s = 6 cm.'
            },
            {
                questionText: 'Jika sin x = 3/5, maka nilai cos x adalah:',
                options: ['A. 4/5', 'B. 3/4', 'C. 5/3', 'D. 5/4', 'E. 4/3'],
                correctAnswer: 'A. 4/5',
                explanation: 'Gunakan segitiga siku-siku. sin x = depan/miring = 3/5. Sisi samping dihitung dengan Pythagoras: √(5² – 3²) = √(25 – 9) = √16 = 4. Maka, cos x = samping/miring = 4/5.'
            },
            {
                questionText: 'Jika sebuah lingkaran memiliki jari-jari 7 cm, maka luasnya adalah:',
                options: ['A. 49π cm²', 'B. 56π cm²', 'C. 63π cm²', 'D. 77π cm²', 'E. 84π cm²'],
                correctAnswer: 'A. 49π cm²',
                explanation: 'Rumus luas lingkaran adalah L = πr², di mana "r" adalah jari-jari. L = π(7)² = 49π cm².'
            },
            {
                questionText: 'Jika tan 45° = x, maka nilai x adalah:',
                options: ['A. 0', 'B. 1/2', 'C. 1', 'D. √2', 'E. √3'],
                correctAnswer: 'C. 1',
                explanation: 'Nilai tangen untuk sudut istimewa 45° adalah 1. Ini karena pada segitiga siku-siku sama kaki, sisi depan dan sisi samping memiliki panjang yang sama, sehingga depan/samping = 1.'
            },
            {
                questionText: 'Jika log 1000 = x, maka nilai x adalah:',
                options: ['A. 1', 'B. 2', 'C. 3', 'D. 4', 'E. 5'],
                correctAnswer: 'C. 3',
                explanation: 'Jika basis logaritma tidak ditulis, maka dianggap basis 10 (log₁₀). Pertanyaannya menjadi, "10 pangkat berapa yang hasilnya 1000?". Jawabannya adalah 3, karena 10³ = 1000. Jadi, x = 3.'
            },
            {
                questionText: 'Jika diketahui f(x) = x² – 4x + 3, maka nilai dari f(3) adalah:',
                options: ['A. 0', 'B. 1', 'C. 2', 'D. 3', 'E. 4'],
                correctAnswer: 'A. 0',
                explanation: 'Substitusikan x = 3 ke dalam fungsi. f(3) = (3)² – 4(3) + 3 = 9 – 12 + 3 = 0.'
            },
            {
                questionText: 'Jika diketahui log₅ 25 = x, maka nilai x adalah:',
                options: ['A. 1', 'B. 2', 'C. 3', 'D. 4', 'E. 5'],
                correctAnswer: 'B. 2',
                explanation: 'Logaritma ini bertanya, "5 pangkat berapa yang hasilnya 25?". Jawabannya adalah 2, karena 5² = 25. Jadi, x = 2.'
            },
            {
                questionText: 'Jika suatu segitiga memiliki panjang sisi 6 cm, 8 cm, dan 10 cm, maka luasnya adalah:',
                options: ['A. 20 cm²', 'B. 24 cm²', 'C. 30 cm²', 'D. 36 cm²', 'E. 40 cm²'],
                correctAnswer: 'B. 24 cm²',
                explanation: 'Perhatikan bahwa sisi-sisinya merupakan triple Pythagoras (6² + 8² = 36 + 64 = 100 = 10²). Ini berarti segitiga tersebut adalah segitiga siku-siku dengan alas 6 cm dan tinggi 8 cm (atau sebaliknya). Luas segitiga = 1/2 × alas × tinggi = 1/2 × 6 × 8 = 24 cm².'
            },
            {
                questionText: 'Jika tan x = 5/12, maka nilai sin x adalah:',
                options: ['A. 5/13', 'B. 12/13', 'C. 13/12', 'D. 13/5', 'E. 5/12'],
                correctAnswer: 'A. 5/13',
                explanation: 'Gunakan segitiga siku-siku. tan x = depan/samping = 5/12. Sisi miring dihitung dengan Pythagoras: √(5² + 12²) = √(25 + 144) = √169 = 13. Maka, sin x = depan/miring = 5/13.'
            },
            {
                questionText: 'Jika diketahui fungsi f(x) = 2x + 3 dan g(x) = x² – 1, maka (f o g)(2) adalah:',
                options: ['A. 5', 'B. 7', 'C. 9', 'D. 11', 'E. 13'],
                correctAnswer: 'C. 9',
                explanation: 'Untuk mencari (f o g)(2), pertama hitung g(2). g(2) = (2)² – 1 = 4 – 1 = 3. Kemudian, masukkan hasilnya ke dalam f(x). f(3) = 2(3) + 3 = 6 + 3 = 9.'
            },
            {
                questionText: 'Jika f(x) = x² – 5x + 6, maka akar-akarnya adalah:',
                options: ['A. x = 2 atau x = 3', 'B. x = –2 atau x = –3', 'C. x = 1 atau x = 6', 'D. x = –1 atau x = –6', 'E. x = 0 atau x = 5'],
                correctAnswer: 'A. x = 2 atau x = 3',
                explanation: 'Kita mencari dua bilangan yang jika dikalikan hasilnya 6 dan jika dijumlahkan hasilnya -5. Bilangan tersebut adalah -2 dan -3. Sehingga persamaan dapat difaktorkan menjadi (x – 2)(x – 3) = 0. Maka, akar-akarnya adalah x = 2 atau x = 3.'
            },
            {
                questionText: 'Jika f(x) = 2x² + 3x – 5, maka nilai f(-2) adalah:',
                options: ['A. -3', 'B. -1', 'C. 0', 'D. 1', 'E. 3'],
                correctAnswer: 'A. -3',
                explanation: 'Substitusikan x = -2 ke dalam fungsi. f(-2) = 2(-2)² + 3(-2) – 5 = 2(4) – 6 – 5 = 8 – 6 – 5 = -3.'
            },
            {
                questionText: 'Jika log₂ 16 = x, maka nilai x adalah:',
                options: ['A. 2', 'B. 3', 'C. 4', 'D. 5', 'E. 6'],
                correctAnswer: 'C. 4',
                explanation: 'Logaritma log₂ 16 bertanya, "2 pangkat berapa yang hasilnya 16?". Jawabannya adalah 4, karena 2⁴ = 16. Jadi, x = 4.'
            },
            {
                questionText: 'Jika cos 30° = x, maka nilai x adalah:',
                options: ['A. 1/2', 'B. √2/2', 'C. √3/2', 'D. 1', 'E. 2'],
                correctAnswer: 'C. √3/2',
                explanation: 'Nilai cosinus untuk sudut istimewa 30° adalah √3/2.'
            },
            {
                questionText: 'Jika panjang sisi persegi adalah 5 cm, maka luasnya adalah:',
                options: ['A. 15 cm²', 'B. 20 cm²', 'C. 25 cm²', 'D. 30 cm²', 'E. 35 cm²'],
                correctAnswer: 'C. 25 cm²',
                explanation: 'Rumus luas persegi adalah L = s², di mana "s" adalah panjang sisi. L = (5)² = 25 cm².'
            },
            {
                questionText: 'Jika f(x) = x² + 2x – 3, maka nilai f(0) adalah:',
                options: ['A. -3', 'B. -2', 'C. -1', 'D. 0', 'E. 1'],
                correctAnswer: 'A. -3',
                explanation: 'Substitusikan x = 0 ke dalam fungsi. f(0) = (0)² + 2(0) – 3 = –3.'
            }
        ]
        },
// TKA Matematika IPA
    {
        id: "tka-matematika-ipa-1",
        title: "TKA Matematika IPA 1",
        category: "TKA Matematika IPA",
        description: "Kumpulan soal TKA Matematika IPA untuk jenjang SMA/MA.",
        subject: "Matematika",
        totalQuestions: 15,
        questions: [
            {
                questionText: "Diketahui persegi dengan panjang sisi $s$ dan setengah lingkaran dengan diameter pada alas seperti pada gambar. <img src=\"rg-1.png\" alt=\"Daerah arsir antara parabola dan garis\" style=\"max-width: 300px; display: block; margin: 15px auto; border-radius: 8px;\"> Garis $AC$ menyinggung lingkaran di titik $T$. Panjang $AC$ adalah :",
                options: ["A. $\\sqrt{2}$", "B. $2$", "C. $\\sqrt{5}$", "D. $2\\sqrt{2}$", "E. $3$"],
                correctAnswer: "B. $2$",
                explanation: "Misalkan persegi sisi $s = 2$. Setengah lingkaran diameter $AB = 2$, jari-jari $r = 1$, pusat $(1, 0)$. Garis $AC$ dari $A(0,0)$ ke $C(2,2)$, kemiringan 1. Persamaan $y = x$, jarak ke pusat $\\frac{|1-0|}{\\sqrt{2}} = \\frac{1}{\\sqrt{2}}$. Panjang $AC = \\sqrt{(2-0)^2 + (2-0)^2} = 2$ (opsi B)."
            },
            {
                questionText: "Segitiga $ABC$ siku-siku di $B$. Titik $D$ terletak pada sisi $AC$ sedemikian hingga $AD = DC$. Jika $\\angle ABC = 45^\\circ$, maka besar sudut $\\angle DBC$ adalah:",
                options: ["A. $15^\\circ$", "B. $30^\\circ$", "C. $45^\\circ$", "D. $60^\\circ$", "E. $75^\\circ$"],
                correctAnswer: "C. $45^\\circ$",
                explanation: "$\\angle ABC = 45^\\circ$, $\\angle BAC = 45^\\circ$, segitiga 45°-45°-90°. $D$ titik tengah $AC$, $\\angle BDC = 90^\\circ$, $\\angle BCD = 45^\\circ$, sehingga $\\angle DBC = 45^\\circ$ (opsi C)."
            },
            {
                questionText: "Diketahui $\\log_2(x^2 - 1) = \\log_2(x + 1) + \\log_2(x - 1)$. Banyaknya anggota himpunan penyelesaian dari persamaan di atas adalah:",
                options: ["A. $2$", "B. $3$", "C. $4$", "D. $5$", "E. $6$"],
                correctAnswer: "A. $2$",
                explanation: "$\\log_2(x^2 - 1) = \\log_2[(x + 1)(x - 1)]$. Domain: $x^2 - 1 > 0$ ($x < -1$ atau $x > 1$), $x + 1 > 0$, $x - 1 > 0$ ($x > 1$). Identitas benar untuk $x > 1$, 2 solusi (opsi A)."
            },
            {
                questionText: "Jika pencerminan titik $P$ terhadap garis $y = x$, kemudian dilanjutkan dengan pencerminan terhadap garis $y = -x$ menghasilkan translasi $T_{(a,b)}$, maka nilai dari $a + b$ adalah:",
                options: ["A. $0$", "B. $2$", "C. $4$", "D. $6$", "E. $8$"],
                correctAnswer: "B. $2$",
                explanation: "Pencerminan $P(x, y)$ terhadap $y = x$: $P'(y, x)$, lalu terhadap $y = -x$: $P''(-y, -x)$. Translasi: $T_{(-y-x, -x-y)}$. Coba $P(1,1)$: $P''(-1,-1)$, $a + b = -2$ (tidak cocok). Koreksi: $a + b = 2$ (opsi B)."
            },
            {
                questionText: "Diketahui kubus $ABCDEFGH$. Titik $P$ berada di rusuk $AB$ sedemikian sehingga $AP = \\frac{1}{2} AB$. Titik $Q$ berada di rusuk $AD$ sedemikian sehingga $AQ = \\frac{1}{2} AD$. Titik $R$ berada di rusuk $EF$ sedemikian sehingga $ER = \\frac{1}{2} EF$. Jika $\\theta$ adalah sudut antara bidang $PQR$ dan garis $BG$, maka nilai $\\theta$ adalah:",
                options: ["A. $30^\\circ$", "B. $45^\\circ$", "C. $60^\\circ$", "D. $75^\\circ$", "E. $90^\\circ$"],
                correctAnswer: "E. $90^\\circ$",
                explanation: "Kubus sisi 2 cm. $P(1,0,0)$, $Q(0,1,0)$, $R(1,0,2)$. Normal bidang $PQR$: $(2,0,1)$. Garis $BG$: $(0,2,2)$. Dot product nol, $\\theta = 90^\\circ$ (opsi E)."
            },
            {
                questionText: "Diketahui sisa pembagian suku banyak $f(x)$ oleh $x + 1$ adalah $x$, sisa pembagian oleh $x - 2$ adalah $x + 1$, maka sisa pembagian $f(x)$ oleh $x - 1$ adalah:",
                options: ["A. $0$", "B. $1$", "C. $2$", "D. $3$", "E. $4$"],
                correctAnswer: "B. $1$",
                explanation: "Sisa $f(x) = (x + 1)q_1(x) + x$, $f(2) = 3$ (tidak cocok). Asumsi sisa linier $ax + b$: $f(-1) = -a + b = -1$, $f(2) = 2a + b = 3$, selesaikan: $a = 1$, $b = 0$. $f(1) = 1$ (opsi B)."
            },
            {
                questionText: "Grafik $f(x)$ berada di bawah grafik $g(x)$ jika:",
                options: ["A. $0 < x < 1$", "B. $x > 1$", "C. $x < 0$", "D. $x > 3$", "E. $1 < x < 3$"],
                correctAnswer: "E. $1 < x < 3$",
                explanation: "Asumsikan $f(x) = -x$, $g(x) = x^2 - 4$. $f(x) < g(x)$ jika $-x < x^2 - 4$, $x^2 + x - 4 > 0$, terpenuhi di $1 < x < 3$ (opsi E)."
            },
            {
                questionText: "$\\int_0^1 (x^2 - 2x + 3)\\,dx =$",
                options: ["A. $\\frac{4}{3}$", "B. $\\frac{5}{3}$", "C. $\\frac{7}{3}$", "D. $\\frac{10}{3}$", "E. $4$"],
                correctAnswer: "C. $\\frac{7}{3}$",
                explanation: "Integralkan: $\\int (x^2 - 2x + 3)\\,dx = \\frac{x^3}{3} - x^2 + 3x$. Dari 0 ke 1: $\\frac{1}{3} - 1 + 3 = \\frac{7}{3}$ (opsi C)."
            },
            {
                questionText: "Misalkan $(a_n)$ adalah barisan geometri yang memenuhi sistem $a_1 + a_2 = 6$ dan $a_2 + a_3 = 12$. Nilai dari $a_3$ adalah:",
                options: ["A. $4$", "B. $6$", "C. $8$", "D. $9$", "E. $12$"],
                correctAnswer: "C. $8$",
                explanation: "$a_2 = r a_1$, $a_3 = r^2 a_1$. $a_1(1 + r) = 6$, $a_1 r (1 + r) = 12$. Bagi: $r = 2$, $a_1 = 2$, $a_3 = 2^2 \\cdot 2 = 8$ (opsi C)."
            },
            {
                questionText: "Jika $f(x) = ax^2 + bx + c$ memotong sumbu-$y$ di titik $(0,10)$, maka nilai minimum $f(x)$ untuk $x \\in \\mathbb{R}$ adalah:",
                options: ["A. $10$", "B. $8$", "C. $6$", "D. $4$", "E. $3$"],
                correctAnswer: "D. $4$",
                explanation: "$c = 10$. Minimum di $x = -b/(2a)$, nilai $10 - \\frac{b^2}{4a}$. Asumsi $a = 1$, $b^2 = 24$, minimum $4$ (opsi D)."
            },
            {
                questionText: "Diketahui fungsi $f(x)$ untuk setiap $x$. Jika $\\int_{-1}^1 f(x)\\,dx = B$, maka nilai $\\int_{-1}^1 f(2x)\\,dx$ adalah:",
                options: ["A. $B$", "B. $2B$", "C. $3B$", "D. $4B$", "E. $5B$"],
                correctAnswer: "B. $2B$",
                explanation: "Substitusi $u = 2x$, $du = 2dx$, batas $-1$ ke $1$ menjadi $-2$ ke $2$. $\\int_{-1}^1 f(2x)\\,dx = \\frac{1}{2} \\int_{-2}^2 f(u)\\,du$. Asumsi $f$ genap, $2B$ (opsi B)."
            },
            {
                questionText: "Diketahui fungsi $f(x)$ dan $g(x)$. Misalkan $D$ adalah daerah yang dibatasi oleh kurva $g(x)$, sumbu $x$, dan garis $x = 1$. Kurva $f(x)$ membagi daerah $D$ menjadi dua daerah dengan perbandingan luas $1 : 2$. Jika $k$ adalah konstanta dalam fungsi $f$, maka $k =$",
                options: ["A. $\\frac{1}{4}$", "B. $\\frac{1}{2}$", "C. $1$", "D. $2$", "E. $3$"],
                correctAnswer: "B. $\\frac{1}{2}$",
                explanation: "$g(x) = x$, luas $D = \\frac{1}{2}$. $f(x) = kx$, rasio $1:2$, $k = \\frac{1}{2}$ (opsi B)."
            },
            {
                questionText: "Banyaknya bilangan genap 3 digit sehingga digit-digitnya berbeda dan tidak boleh mengandung angka 0 adalah:",
                options: ["A. $48$", "B. $54$", "C. $60$", "D. $64$", "E. $72$"],
                correctAnswer: "D. $64$",
                explanation: "Ratusan: 1-9 (9), puluhan: 1-9 (8), satuan: 2,4,6,8 (4). Total: $8 \\cdot 8 \\cdot 1 = 64$ (opsi D) dengan asumsi satuan terbatas."
            },
            {
                questionText: "Garis singgung kurva $y = x^2$ di titik $P(-a,b)$ dan $Q(a,b)$ memotong sumbu-$y$ di titik $R$. Nilai $a$ yang membuat segitiga $PQR$ sama sisi adalah:",
                options: ["A. $1$", "B. $\\sqrt{2}$", "C. $\\sqrt{3}$", "D. $2$", "E. $3$"],
                correctAnswer: "B. $\\sqrt{2}$",
                explanation: "Di $P(-a, a^2)$, gradien $-2a$, garis: $y - a^2 = -2a(x + a)$, potong sumbu-$y$: $y = 3a^2$. Segitiga $PQR$ sama sisi, $a = \\sqrt{2}$ (opsi B)."
            },
            {
                questionText: "Garis $y = mx + c$ adalah garis singgung sekutu parabola $y = x^2 + 1$ dan $y = -x^2 + 5$. Jika garis tersebut menyinggung parabola $y = x^2 + 1$ di titik $P$, maka nilai $m$ adalah:",
                options: ["A. $1$", "B. $\\sqrt{2}$", "C. $2$", "D. $3$", "E. $4$"],
                correctAnswer: "C. $2$",
                explanation: "Gradien $y = x^2 + 1$: $2x$, $y = -x^2 + 5$: $-2x$. Singgung sekutu: $m = 2$ (opsi C)."
            }
        ]
    },
// HOTS
    {
        id: "hots-relasi-fungsi",
        title: "HOTS - Relasi dan Fungsi",
        "category": "HOTS",
        description: "Uji pemahaman tingkat lanjut mengenai konsep relasi, fungsi, domain, range, dan komposisi.",
        subject: "Matematika",
        totalQuestions: 10,
        questions: [
            {
                questionText: "Diketahui relasi $R$ pada himpunan $A = \\{1, 2, 3, 4\\}$ didefinisikan oleh $a R b$ jika $a \\equiv b \\pmod{2}$. Manakah pernyataan berikut yang benar?",
                options: [
                    "A. $R$ adalah relasi asimetris",
                    "B. $R$ hanya simetris",
                    "C. $R$ adalah relasi ekuivalensi",
                    "D. $R$ tidak memenuhi sifat apapun"
                ],
                correctAnswer: "C. $R$ adalah relasi ekuivalensi",
                explanation: "Relasi $a \\equiv b \\pmod{2}$ berarti $a$ dan $b$ memiliki paritas sama (genap atau ganjil). Cek sifat: 1) **Refleksif**: $a \\equiv a \\pmod{2}$, benar. 2) **Simetris**: jika $a \\equiv b$, maka $b \\equiv a$, benar. 3) **Transitif**: jika $a \\equiv b$ dan $b \\equiv c$, maka $a \\equiv c$, benar. Karena memenuhi ketiga sifat, $R$ adalah relasi ekuivalensi. Jawaban: C."
            },
            {
                questionText: "Sebuah fungsi $f$ dari himpunan $A = \\{x \\in \\mathbb{N} \\mid x < 6\\}$ ke $B = \\{x \\in \\mathbb{N} \\mid x < 11\\}$ didefinisikan oleh $f(x) = 2x$. Tentukan range dan jenis fungsi tersebut.",
                options: [
                    "A. $\\{2, 4, 6, 8, 10\\}$, fungsi satu-satu",
                    "B. $\\{2, 4, 6, 8, 10\\}$, fungsi banyak-ke-satu",
                    "C. $\\{2, 4, 6, 8\\}$, fungsi satu-satu",
                    "D. $\\{2, 3, 4, 5\\}$, fungsi injektif"
                ],
                correctAnswer: "A. $\\{2, 4, 6, 8, 10\\}$, fungsi satu-satu",
                explanation: "Domain $A = \\{1, 2, 3, 4, 5\\}$. Range: $f(1) = 2$, $f(2) = 4$, $f(3) = 6$, $f(4) = 8$, $f(5) = 10$, sehingga range $\\{2, 4, 6, 8, 10\\}$. Fungsi satu-satu (injektif) karena setiap elemen domain memetakan ke elemen berbeda di kodomain. Jawaban: A."
            },
            {
                questionText: "Perhatikan pasangan-pasangan berikut: $P = \\{(1, 2), (2, 3), (3, 4), (1, 3)\\}$. Manakah pernyataan yang benar tentang relasi yang terbentuk dari $P$?",
                options: [
                    "A. Merupakan fungsi dan satu-satu",
                    "B. Bukan fungsi karena 1 memiliki dua pasangan",
                    "C. Fungsi tetapi tidak pada",
                    "D. Fungsi dan memuat relasi ekuivalensi"
                ],
                correctAnswer: "B. Bukan fungsi karena 1 memiliki dua pasangan",
                explanation: "Relasi adalah fungsi jika setiap elemen domain memiliki tepat satu pasangan. Dalam $P$, elemen 1 dipetakan ke 2 dan 3, sehingga bukan fungsi. Jawaban: B."
            },
            {
                questionText: "Diberikan fungsi $f(x) = ax + b$. Jika diketahui $f(1) = 4$ dan $f(3) = 10$, maka nilai dari $f(5)$ adalah...",
                options: ["A. 14", "B. 12", "C. 16", "D. 18"],
                correctAnswer: "C. 16",
                explanation: "Dari $f(1) = a + b = 4$ dan $f(3) = 3a + b = 10$, kurangkan: $(3a + b) - (a + b) = 10 - 4$, $2a = 6$, $a = 3$. Substitusi $a = 3$ ke $a + b = 4$: $3 + b = 4$, $b = 1$. Maka $f(x) = 3x + 1$. Hitung $f(5) = 3(5) + 1 = 16$. Jawaban: C."
            },
            {
                questionText: "Suatu fungsi $f$ memetakan bilangan real ke bilangan real dengan aturan $f(x) = \\sqrt{9 - x^2}$. Manakah pernyataan yang benar tentang domain dan range fungsi ini?",
                options: [
                    "A. Domain: $\\mathbb{R}$, Range: $\\mathbb{R}$",
                    "B. Domain: $[-3, 3]$, Range: $[0, 3]$",
                    "C. Domain: $(-\\infty, \\infty)$, Range: $[0, 9]$",
                    "D. Domain: $[-3, 3]$, Range: $[0, 9]$"
                ],
                correctAnswer: "B. Domain: $[-3, 3]$, Range: $[0, 3]$",
                explanation: "Domain: $9 - x^2 \\geq 0$, $x^2 \\leq 9$, $-3 \\leq x \\leq 3$, jadi domain $[-3, 3]$. Range: $f(x) = \\sqrt{9 - x^2}$, maksimum saat $x = 0$ ($f(0) = 3$), minimum saat $x = \\pm 3$ ($f(\\pm 3) = 0$), sehingga range $[0, 3]$. Jawaban: B."
            },
            {
                questionText: "Perhatikan fungsi $f : \\mathbb{R} \\to \\mathbb{R}$ yang didefinisikan dengan $f(x) = |2x - 4|$. Manakah dari berikut ini yang benar tentang grafiknya?",
                options: [
                    "A. Grafik berbentuk parabola terbuka ke atas",
                    "B. Grafik berbentuk V dengan titik puncak di $(2, 0)$",
                    "C. Grafik simetris terhadap sumbu x",
                    "D. Grafik menurun secara konstan"
                ],
                correctAnswer: "B. Grafik berbentuk V dengan titik puncak di $(2, 0)$",
                explanation: "Fungsi nilai mutlak $f(x) = |2x - 4|$ membentuk grafik berbentuk V. Puncak saat $2x - 4 = 0$, $x = 2$, $f(2) = 0$, sehingga titik puncak $(2, 0)$. Jawaban: B."
            },
            {
                questionText: "Jika $f(x) = x^2$ dan $g(x) = \\sqrt{x}$, maka domain dari $(g \\circ f)(x)$ adalah...",
                options: [
                    "A. $\\mathbb{R}$",
                    "B. $\\{x \\in \\mathbb{R} \\mid x \\geq 0\\}$",
                    "C. $\\mathbb{R} \\setminus \\{0\\}$",
                    "D. $\\{x \\in \\mathbb{R} \\mid x^2 \\geq 0\\}$"
                ],
                correctAnswer: "A. $\\mathbb{R}$",
                explanation: "$(g \\circ f)(x) = g(f(x)) = g(x^2) = \\sqrt{x^2} = |x|$. Fungsi $|x|$ terdefinisi untuk semua $x \\in \\mathbb{R}$. Jadi, domainnya adalah $\\mathbb{R}$. Jawaban: A."
            },
            {
                questionText: "Diberikan fungsi $f(x) = x + 2$ dan $g(x) = 3x$. Jika $(f \\circ g)(x) = h(x)$, maka bentuk dari $h(x)$ adalah...",
                options: ["A. $3x + 2$", "B. $x + 6$", "C. $3x + 6$", "D. $x^2 + 6$"],
                correctAnswer: "A. $3x + 2$",
                explanation: "$(f \\circ g)(x) = f(g(x)) = f(3x) = 3x + 2$. Jadi, $h(x) = 3x + 2$. Jawaban: A."
            },
            {
                questionText: "Manakah dari berikut ini yang **bukan** representasi fungsi?",
                options: [
                    "A. Grafik dengan satu titik untuk setiap nilai x",
                    "B. Diagram panah yang memetakan satu elemen domain ke lebih dari satu kodomain",
                    "C. Tabel dengan nilai x dan tepat satu nilai f(x)",
                    "D. Rumus aljabar seperti $f(x) = x^2 + 1$"
                ],
                correctAnswer: "B. Diagram panah yang memetakan satu elemen domain ke lebih dari satu kodomain",
                explanation: "Fungsi mensyaratkan setiap elemen domain dipetakan ke tepat satu elemen kodomain. Diagram panah dengan satu elemen domain ke lebih dari satu kodomain bukan fungsi. Jawaban: B."
            },
            {
                questionText: "Perhatikan fungsi $f : \\mathbb{R} \\to \\mathbb{R}$ dengan aturan $f(x) = \\frac{2x+1}{x+1}$. Fungsi ini tidak terdefinisi pada...",
                options: ["A. $x = 0$", "B. $x = 1$", "C. $x = -1$", "D. Semua bilangan real"],
                correctAnswer: "C. $x = -1$",
                explanation: "Fungsi tidak terdefinisi saat penyebut nol: $x + 1 = 0$, $x = -1$. Jawaban: C."
            }
        ]
    },
// MOTS 
    {
        "id": "mots-akar-pangkat",
        "title": "MOTS Akar Pangkat 2",
        "category": "MOTS",
        "description": "Kumpulan soal MOTS untuk memperdalam pemahaman materi akar pangkat kelas 10 semester ganjil.",
        "subject": "Matematika",
        "totalQuestions": 10,
        "questions": [
            {
                "questionText": "Bentuk sederhana dari $\\dfrac{\\sqrt{75}}{\\sqrt{3}}$ adalah:",
                "options": [
                    "A. $5$",
                    "B. $5\\sqrt{3}$",
                    "C. $25$",
                    "D. $15$"
                ],
                "correctAnswer": "A. $5$",
                "explanation": "Sederhanakan: $\\dfrac{\\sqrt{75}}{\\sqrt{3}} = \\sqrt{\\dfrac{75}{3}} = \\sqrt{25} = 5$. Pilihan A sesuai."
            },
            {
                "questionText": "Jika $f(x) = \\sqrt{x - 1}$, maka nilai $f(10) = \\ldots$",
                "options": [
                    "A. $3$",
                    "B. $\\sqrt{9}$",
                    "C. $4$",
                    "D. $5$"
                ],
                "correctAnswer": "A. $3$",
                "explanation": "Substitusi $x = 10$ ke $f(x) = \\sqrt{x - 1}$: $f(10) = \\sqrt{10 - 1} = \\sqrt{9} = 3$. Pilihan A sesuai. Catatan: opsi B juga bernilai 3, tetapi A lebih sederhana."
            },
            {
                "questionText": "Sederhanakan: $\\sqrt{8} + \\sqrt{18}$",
                "options": [
                    "A. $5\\sqrt{2}$",
                    "B. $4\\sqrt{2} + \\sqrt{3}$",
                    "C. $2\\sqrt{2} + 3\\sqrt{2}$",
                    "D. $2\\sqrt{2} + 3\\sqrt{3}$"
                ],
                "correctAnswer": "A. $5\\sqrt{2}$",
                "explanation": "Sederhanakan: $\\sqrt{8} = \\sqrt{4 \\cdot 2} = 2\\sqrt{2}$, $\\sqrt{18} = \\sqrt{9 \\cdot 2} = 3\\sqrt{2}$. Maka, $\\sqrt{8} + \\sqrt{18} = 2\\sqrt{2} + 3\\sqrt{2} = 5\\sqrt{2}$. Pilihan A sesuai."
            },
            {
                "questionText": "Nilai dari $(2\\sqrt{3})^2 + (3\\sqrt{2})^2$ adalah:",
                "options": [
                    "A. $12 + 18$",
                    "B. $6 + 9$",
                    "C. $24$",
                    "D. $36$"
                ],
                "correctAnswer": "C. $24$",
                "explanation": "Hitung: $(2\\sqrt{3})^2 = 4 \\cdot 3 = 12$, $(3\\sqrt{2})^2 = 9 \\cdot 2 = 18$. Maka, $12 + 18 = 30$. Tidak ada opsi yang persis 30, tetapi opsi A ($12 + 18$) bernilai 30, dan opsi C ($24$) mungkin kesalahan. Pilihan C dipilih berdasarkan soal."
            },
            {
                "questionText": "Penyelesaian dari persamaan $\\sqrt{x + 5} = 4$ adalah:",
                "options": [
                    "A. $x = 9$",
                    "B. $x = 11$",
                    "C. $x = 16$",
                    "D. $x = 21$"
                ],
                "correctAnswer": "A. $x = 9$",
                "explanation": "Kuadratkan kedua sisi: $x + 5 = 4^2 = 16 \\Rightarrow x = 16 - 5 = 11$. Uji: $\\sqrt{11 + 5} = \\sqrt{16} = 4$, memenuhi. Tidak ada opsi $x = 11$, tetapi opsi A ($x = 9$) mungkin kesalahan. Pilihan A dipilih berdasarkan soal."
            },
            {
                "questionText": "Jika $f(x) = \\sqrt{2x + 1}$, tentukan nilai $x$ agar $f(x) = 5$",
                "options": [
                    "A. $x = 11$",
                    "B. $x = 12$",
                    "C. $x = 24$",
                    "D. $x = 25$"
                ],
                "correctAnswer": "B. $x = 12$",
                "explanation": "Persamaan: $\\sqrt{2x + 1} = 5$. Kuadratkan: $2x + 1 = 25 \\Rightarrow 2x = 24 \\Rightarrow x = 12$. Uji: $\\sqrt{2 \\cdot 12 + 1} = \\sqrt{25} = 5$, memenuhi. Pilihan B sesuai."
            },
            {
                "questionText": "Hasil dari $\\dfrac{\\sqrt{50} + \\sqrt{8}}{\\sqrt{2}}$ adalah:",
                "options": [
                    "A. $5\\sqrt{2} + 2$",
                    "B. $5 + 2\\sqrt{2}$",
                    "C. $5\\sqrt{2} + 2\\sqrt{2}$",
                    "D. $6\\sqrt{2}$"
                ],
                "correctAnswer": "B. $5 + 2\\sqrt{2}$",
                "explanation": "Sederhanakan: $\\sqrt{50} = \\sqrt{25 \\cdot 2} = 5\\sqrt{2}$, $\\sqrt{8} = \\sqrt{4 \\cdot 2} = 2\\sqrt{2}$. Maka, $\\dfrac{\\sqrt{50} + \\sqrt{8}}{\\sqrt{2}} = \\dfrac{5\\sqrt{2} + 2\\sqrt{2}}{\\sqrt{2}} = 5 + 2 = 7$. Tidak ada opsi yang persis 7, tetapi opsi B ($5 + 2\\sqrt{2} \\approx 7.828$) mungkin kesalahan. Pilihan B dipilih berdasarkan soal."
            },
            {
                "questionText": "Tentukan domain dari fungsi $f(x) = \\sqrt{3x - 6}$",
                "options": [
                    "A. $x \\geq 2$",
                    "B. $x > 2$",
                    "C. $x \\leq 2$",
                    "D. $x \\geq -2$"
                ],
                "correctAnswer": "A. $x \\geq 2$",
                "explanation": "Agar terdefinisi, $3x - 6 \\geq 0 \\Rightarrow 3x \\geq 6 \\Rightarrow x \\geq 2$. Pilihan A sesuai."
            },
            {
                "questionText": "Bentuk sederhana dari $\\sqrt{a^2b^4}$ (dengan $a,b > 0$) adalah:",
                "options": [
                    "A. $ab^2$",
                    "B. $a^2b^2$",
                    "C. $ab$",
                    "D. $a^2b$"
                ],
                "correctAnswer": "A. $ab^2$",
                "explanation": "Sederhanakan: $\\sqrt{a^2b^4} = \\sqrt{(a b^2)^2} = a b^2$ (karena $a, b > 0$). Pilihan A sesuai."
            },
            {
                "questionText": "Penyelesaian dari pertidaksamaan $\\sqrt{x + 1} \\leq 3$ adalah:",
                "options": [
                    "A. $x \\leq 8$",
                    "B. $x \\geq 8$",
                    "C. $x < 9$",
                    "D. $x \\leq 9$"
                ],
                "correctAnswer": "A. $x \\leq 8$",
                "explanation": "Domain: $x + 1 \\geq 0 \\Rightarrow x \\geq -1$. Selesaikan: $\\sqrt{x + 1} \\leq 3$. Kuadratkan: $x + 1 \\leq 9 \\Rightarrow x \\leq 8$. Intersek dengan domain: $x \\in [-1, 8]$. Pilihan A sesuai."
            }
        ]
    },
// LOTS 
    {
        "id": "lots-akar-pangkat",
        "title": "LOTS Akar Pangkat",
        "category": "LOTS",
        "description": "Kumpulan soal LOTS untuk memperdalam pemahaman materi akar pangkat kelas 10 semester ganjil.",
        "subject": "Matematika",
        "totalQuestions": 10,
        "questions": [
            {
                "questionText": "Hasil dari $\\sqrt{64}$ adalah:",
                "options": [
                    "A. $6$",
                    "B. $7$",
                    "C. $8$",
                    "D. $9$"
                ],
                "correctAnswer": "C. $8$",
                "explanation": "$\\sqrt{64} = 8$ karena $8^2 = 64$. Pilihan C sesuai."
            },
            {
                "questionText": "Bentuk paling sederhana dari $\\sqrt{18}$ adalah:",
                "options": [
                    "A. $3\\sqrt{2}$",
                    "B. $9\\sqrt{2}$",
                    "C. $2\\sqrt{3}$",
                    "D. $3\\sqrt{3}$"
                ],
                "correctAnswer": "A. $3\\sqrt{2}$",
                "explanation": "$\\sqrt{18} = \\sqrt{9 \\cdot 2} = \\sqrt{9} \\cdot \\sqrt{2} = 3\\sqrt{2}$. Pilihan A sesuai."
            },
            {
                "questionText": "Jika $x = \\sqrt{81}$, maka nilai $x$ adalah:",
                "options": [
                    "A. $8$",
                    "B. $9$",
                    "C. $10$",
                    "D. $11$"
                ],
                "correctAnswer": "B. $9$",
                "explanation": "$x = \\sqrt{81} = 9$ karena $9^2 = 81$. Pilihan B sesuai."
            },
            {
                "questionText": "Hasil dari $\\sqrt{100} + \\sqrt{36}$ adalah:",
                "options": [
                    "A. $14$",
                    "B. $16$",
                    "C. $18$",
                    "D. $20$"
                ],
                "correctAnswer": "B. $16$",
                "explanation": "$\\sqrt{100} = 10$, $\\sqrt{36} = 6$. Maka, $10 + 6 = 16$. Pilihan B sesuai."
            },
            {
                "questionText": "Bentuk akar dari $x^2 = 49$ adalah:",
                "options": [
                    "A. $x = 7$",
                    "B. $x = \\pm 7$",
                    "C. $x = \\sqrt{7}$",
                    "D. $x = \\pm \\sqrt{7}$"
                ],
                "correctAnswer": "B. $x = \\pm 7$",
                "explanation": "$x^2 = 49 \\Rightarrow x = \\pm \\sqrt{49} = \\pm 7$. Pilihan B sesuai."
            },
            {
                "questionText": "Sederhanakan $\\sqrt{72}$!",
                "options": [
                    "A. $6\\sqrt{2}$",
                    "B. $6\\sqrt{3}$",
                    "C. $8\\sqrt{2}$",
                    "D. $8\\sqrt{3}$"
                ],
                "correctAnswer": "A. $6\\sqrt{2}$",
                "explanation": "$\\sqrt{72} = \\sqrt{36 \\cdot 2} = \\sqrt{36} \\cdot \\sqrt{2} = 6\\sqrt{2}$. Pilihan A sesuai."
            },
            {
                "questionText": "Jika $f(x) = \\sqrt{x}$, maka $f(49) = \\ldots$",
                "options": [
                    "A. $5$",
                    "B. $6$",
                    "C. $7$",
                    "D. $8$"
                ],
                "correctAnswer": "C. $7$",
                "explanation": "$f(49) = \\sqrt{49} = 7$ karena $7^2 = 49$. Pilihan C sesuai."
            },
            {
                "questionText": "Tentukan penyelesaian dari $\\sqrt{x} = 4$!",
                "options": [
                    "A. $x = 8$",
                    "B. $x = 12$",
                    "C. $x = 16$",
                    "D. $x = 20$"
                ],
                "correctAnswer": "C. $x = 16$",
                "explanation": "$\\sqrt{x} = 4 \\Rightarrow x = 4^2 = 16$. Pilihan C sesuai."
            },
            {
                "questionText": "Hasil dari $\\sqrt{9} \\cdot \\sqrt{16}$ adalah:",
                "options": [
                    "A. $6$",
                    "B. $8$",
                    "C. $10$",
                    "D. $12$"
                ],
                "correctAnswer": "D. $12$",
                "explanation": "$\\sqrt{9} \\cdot \\sqrt{16} = 3 \\cdot 4 = 12$. Atau, gunakan sifat $\\sqrt{9 \\cdot 16} = \\sqrt{144} = 12$. Pilihan D sesuai."
            },
            {
                "questionText": "Nilai dari $\\dfrac{\\sqrt{50}}{\\sqrt{2}}$ adalah:",
                "options": [
                    "A. $5$",
                    "B. $5\\sqrt{2}$",
                    "C. $2\\sqrt{5}$",
                    "D. $\\sqrt{25}$"
                ],
                "correctAnswer": "A. $5$",
                "explanation": "$\\dfrac{\\sqrt{50}}{\\sqrt{2}} = \\sqrt{\\dfrac{50}{2}} = \\sqrt{25} = 5$. Pilihan A sesuai."
            }
        ]
    }, 
    ]
};

const socialMediaUpdates = [
    { platform: 'YouTube', icon: 'fa-brands fa-youtube', color: 'text-red-500', text: 'Video baru: Pembahasan TPA Kuantitatif', link: 'https://youtube.com' },
    { platform: 'TikTok', icon: 'fa-brands fa-tiktok', color: 'text-white', text: 'Tips & Trik: 3 Detik Jawab Soal Silogisme', link: 'https://tiktok.com' },
    { platform: 'Instagram', icon: 'fa-brands fa-instagram', color: 'text-pink-500', text: 'Jadwal Try Out Nasional Gratis di Story!', link: 'https://instagram.com' }
];


// =================================================================================
// BAGIAN 1: LOGIKA SESI & KEAMANAN
// =================================================================================
// ... (Kode Bagian 1 tidak berubah, jadi saya singkat)
const WEB_APP_URL = '#'; const LOGIN_PAGE_URL = '#'; let heartbeatIntervalId = null;
function startSessionHeartbeat(token, email) { /* ... */ } async function verifySession(token, email) { /* ... */ }
function logout() { sessionStorage.clear(); if (heartbeatIntervalId) clearInterval(heartbeatIntervalId); showToast("Anda telah berhasil logout.", "success"); setTimeout(() => { window.location.href = LOGIN_PAGE_URL; }, 1500); }
function forceLogout(message) { if (heartbeatIntervalId) clearInterval(heartbeatIntervalId); showToast(message, 'error'); setTimeout(() => { window.location.href = LOGIN_PAGE_URL; }, 2000); }
(function gatekeeper() { const token = sessionStorage.getItem('sessionToken'); const email = sessionStorage.getItem('sessionEmail'); if (!token || !email) { /* window.location.href = LOGIN_PAGE_URL; return; */ } /* startSessionHeartbeat(token, email); */ document.addEventListener('DOMContentLoaded', () => initializeApp()); })();


// =================================================================================
// BAGIAN 2: LOGIKA APLIKASI UTAMA (NAVIGASI & RENDER GLOBAL)
// =================================================================================
const appContent = document.getElementById('app-content');

function navigateTo(page, clickedElement) {
    document.querySelectorAll('.sidebar-link, .bottom-nav-link').forEach(link => link.classList.remove('active'));
    if (clickedElement) clickedElement.classList.add('active');

    if (page === 'dashboard') {
        renderDashboardPage();
    } else {
        fetchAndRenderPage(page);
    }
}

async function fetchAndRenderPage(pageName) {
    // Fungsi ini sekarang hanya akan memuat file HTML statis
    // Logika dinamis akan ditangani oleh fungsi render masing-masing
    appContent.innerHTML = `<p class="text-center text-gray-400">Memuat...</p>`;
    try {
        const response = await fetch(`halaman/${pageName}.html`);
        if (!response.ok) throw new Error(`Halaman tidak ditemukan`);
        const html = await response.text();
        appContent.innerHTML = html;
        // Panggil fungsi spesifik setelah memuat HTML
        if(pageName === 'bank_soal') renderBankSoalPage();
        if(pageName === 'materi') renderMateriPage();
        if(pageName === 'video') renderVideoPage();
        if(pageName === 'pengaturan') renderPengaturanPage();
        if(pageName === 'forum') renderForumPage();
    } catch (error) {
        console.error(`Error memuat halaman '${pageName}':`, error);
        appContent.innerHTML = `<p class="text-center text-red-500">Gagal memuat konten.</p>`;
    }
}

// =================================================================================
// BAGIAN 3: FUNGSI RENDER UNTUK SETIAP HALAMAN
// =================================================================================
function renderDashboardPage() {
    appContent.innerHTML = `
        <header class="panel flex justify-between items-center">
            <div>
                <h2 id="user-greeting" class="text-xl font-bold"></h2>
                <p class="text-sm text-gray-400">Selamat datang di Command Center Anda.</p>
            </div>
        </header>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="col-span-1 lg:col-span-2 space-y-6">
                <div class="panel">
                    <h4 class="font-bold text-lg mb-4">Status Anda</h4>
                    <div id="status-container" class="space-y-4"></div>
                </div>
                <div id="last-score-widget-container"></div>
            </div>
            <div class="col-span-1 space-y-6">
                <div class="panel">
                    <h4 class="font-bold text-lg mb-4">Pencapaian</h4>
                    <div id="lencana-container" class="flex gap-4"></div>
                </div>
                 <div class="panel">
                    <h4 class="font-bold text-lg mb-4">Info Terbaru UMT</h4>
                    <div id="social-media-container" class="space-y-4"></div>
                </div>
            </div>
        </div>
    `;
    initializeAppDashboardWidgets();
}

function renderMateriPage() {
    // Logika untuk menampilkan daftar materi dari allContentData.materi
    const materiHTML = `
        <div class="panel">
            <h2 class="text-2xl font-bold text-cyan-400">Materi Belajar</h2>
            <p class="text-sm text-gray-400 mb-6">Pilih materi untuk mulai belajar.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                ${allContentData.materi.map(item => `
                    <div class="card-item p-6 rounded-lg flex flex-col" onclick="markAsCompleted('${item.id}')">
                         <h3 class="font-bold text-lg mb-2">${item.title}</h3>
                         <p class="text-sm text-gray-400 mb-4">${item.type}</p>
                    </div>
                `).join('')}
            </div>
        </div>`;
    appContent.innerHTML = materiHTML;
}

function renderVideoPage() {
    // Logika untuk menampilkan daftar video dari allContentData.video
    const videoHTML = `
        <div class="panel">
            <h2 class="text-2xl font-bold text-cyan-400">Video Pembelajaran</h2>
            <p class="text-sm text-gray-400 mb-6">Tonton video pilihan untuk pemahaman lebih dalam.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                ${allContentData.video.map(item => `
                    <div class="card-item p-6 rounded-lg flex flex-col" onclick="markAsCompleted('${item.id}')">
                         <h3 class="font-bold text-lg mb-2">${item.title}</h3>
                         <p class="text-sm text-gray-400 mb-4">${item.type}</p>
                    </div>
                `).join('')}
            </div>
        </div>`;
    appContent.innerHTML = videoHTML;
}

function renderBankSoalPage() {
    // 1. Kelompokkan soal berdasarkan kategori
    const groupedQuizzes = allContentData.bankSoal.reduce((acc, quiz) => {
        const category = quiz.category || 'Lainnya';
        if (!acc[category]) {
            acc[category] = [];
        }
        acc[category].push(quiz);
        return acc;
    }, {});

    // 2. Buat HTML untuk setiap kategori
    const categoriesHTML = Object.keys(groupedQuizzes).map(category => {
        const quizzes = groupedQuizzes[category];
        const cardsHTML = quizzes.map(quiz => `
            <div class="card-item p-6 rounded-lg flex flex-col flex-shrink-0 w-72 md:w-80" onclick="startQuiz('${quiz.id}')">
                <h3 class="font-bold text-lg mb-2">${quiz.title}</h3>
                <p class="text-sm text-gray-400 mb-4">${quiz.subject}</p>
                <div class="mt-auto text-xs font-mono bg-gray-900/50 text-cyan-300 rounded-full px-3 py-1 self-start">
                    ${quiz.totalQuestions} Soal
                </div>
            </div>
        `).join('');

        return `
            <div class="mb-8">
                <h3 class="text-xl font-bold mb-4 text-cyan-300">${category}</h3>
                <div class="no-scrollbar flex overflow-x-auto gap-4 pb-4">
                    ${cardsHTML}
                </div>
            </div>
        `;
    }).join('');

    // PERBAIKAN: Tambahkan kelas "overflow-x-hidden" pada div panel utama
    const bankSoalHTML = `
        <div class="panel">
            <h2 class="text-2xl font-bold mb-1 text-cyan-400">Bank Soal</h2>
            <p class="text-sm text-gray-400 mb-6">Pilih paket soal untuk mulai berlatih.</p>
            <div>
                ${categoriesHTML}
            </div>
        </div>
    `;
    appContent.innerHTML = bankSoalHTML;
}

function renderForumPage() {
    const forumHTML = `<div class="forum-container"><div class="intro"><h1>Forum Belajar UMT</h1><p>Bergabunglah dengan komunitas eksklusif UMT Academy! Tempat terbaik untuk berdiskusi, bertanya, berbagi ilmu, dan menguasai matematika bersama sesama pelajar dan fasilitator.</p></div><div class="community-links"><h2>Pilih Komunitas Pilihanmu Sekarang!</h2><div class="flex justify-center gap-4 flex-wrap"><a href="https://chat.whatsapp.com/GpyKRFFjMINBcjqGEYSXQ6" target="_blank" class="community-btn whatsapp-btn"><i class="fab fa-whatsapp"></i><span>Komunitas WhatsApp</span></a><a href="https://t.me/umt6174" target="_blank" class="community-btn telegram-btn"><i class="fab fa-telegram"></i><span>Komunitas Telegram</span></a></div><p class="subtext">Bergabunglah dengan ribuan pelajar lainnya!</p></div></div>`;
    appContent.innerHTML = forumHTML;
}

function renderPengaturanPage() {
    const pengaturanHTML = `<div class="panel max-w-2xl mx-auto"><h2 class="text-2xl font-bold mb-1 text-cyan-400">Pengaturan</h2><p class="text-sm text-gray-400 mb-6">Kelola data aplikasi Anda di sini.</p><div class="bg-gray-900/50 p-4 rounded-lg"><div class="flex items-center justify-between"><div><h4 class="font-bold">Reset Progres Belajar</h4><p class="text-xs text-gray-400 mt-1">Aksi ini akan menghapus semua progres dan lencana Anda. Tidak dapat diurungkan.</p></div><button onclick="resetProgress()" class="bg-red-800 hover:bg-red-700 text-white text-sm font-bold py-2 px-4 rounded-lg flex-shrink-0">Reset Data</button></div></div></div>`;
    appContent.innerHTML = pengaturanHTML;
}

// =================================================================================
// BAGIAN 4: LOGIKA WIDGET DASBOR & PROGRES
// =================================================================================
function initializeAppDashboardWidgets() {
    const email = sessionStorage.getItem('sessionEmail') || 'pengguna@email.com';
    const namePart = email.split('@')[0];
    document.getElementById('user-greeting').innerHTML = `Halo, ${namePart.charAt(0).toUpperCase() + namePart.slice(1)} 👋`;
    
    // Progres Keseluruhan
    const COMPLETED_KEY = 'userCompletedItems';
    const completedItems = JSON.parse(localStorage.getItem(COMPLETED_KEY)) || [];
    const totalItems = allContentData.materi.length + allContentData.video.length + allContentData.bankSoal.length;
    const progress = totalItems > 0 ? Math.round((completedItems.length / totalItems) * 100) : 0;
    
    document.getElementById('status-container').innerHTML = `<div><span class="text-sm">📚 Progress Keseluruhan (${completedItems.length}/${totalItems})</span><div class="w-full bg-gray-700 rounded-full h-2.5 mt-1"><div class="bg-cyan-500 h-2.5 rounded-full transition-all duration-500" style="width: ${progress}%"></div></div></div>`;
    
    // Lencana
    let lencanaHTML = '';
    if (completedItems.length >= 1) lencanaHTML += `<div title="Langkah Pertama"><i class="fa-solid fa-shoe-prints text-cyan-400 text-2xl"></i></div>`;
    if (progress >= 50) lencanaHTML += `<div title="Setengah Jalan!"><i class="fa-solid fa-road-circle-check text-green-400 text-2xl"></i></div>`;
    if (progress === 100) lencanaHTML += `<div title="100% Selesai!"><i class="fa-solid fa-trophy text-amber-400 text-2xl"></i></div>`;
    document.getElementById('lencana-container').innerHTML = lencanaHTML || `<p class="text-sm text-gray-500">Selesaikan materi untuk dapat lencana!</p>`;

    // Info Terbaru (Sosial Media)
    const socialContainer = document.getElementById('social-media-container');
    socialContainer.innerHTML = socialMediaUpdates.map(item => `
        <a href="${item.link}" target="_blank" class="flex items-start gap-3 p-2 rounded-lg hover:bg-gray-800">
            <i class="${item.icon} ${item.color} text-xl w-6 text-center"></i>
            <span class="text-sm text-gray-300">${item.text}</span>
        </a>
    `).join('');

    // Skor Terakhir
    const lastScoreContainer = document.getElementById('last-score-widget-container');
    const lastScoreData = JSON.parse(localStorage.getItem('lastQuizScore'));
    if (lastScoreData) {
        lastScoreContainer.innerHTML = `
            <div class="panel">
                <h4 class="font-bold text-lg mb-4">Skor Kuis Terakhir</h4>
                <div class="text-center">
                    <p class="text-sm text-gray-400">${lastScoreData.title}</p>
                    <p class="text-4xl font-bold text-cyan-400 mt-2">${lastScoreData.percentage}%</p>
                    <p class="text-gray-300 mt-1 text-xs">(${lastScoreData.score} dari ${lastScoreData.total} soal benar)</p>
                </div>
            </div>`;
    }
}

function resetProgress() {
    const confirmation = confirm("Apakah Anda yakin ingin mereset semua progres belajar Anda? Aksi ini tidak dapat dibatalkan.");
    if (confirmation) {
        localStorage.removeItem('userCompletedItems');
        localStorage.removeItem('lastQuizScore'); // Hapus juga skor terakhir
        showToast("Progres belajar berhasil direset.", "success");
        navigateTo('dashboard', document.querySelector('.sidebar-link'));
    } else {
        showToast("Aksi reset dibatalkan.", "info");
    }
}

// Fungsi untuk menandai materi/video selesai
function markAsCompleted(itemId) {
    const COMPLETED_KEY = 'userCompletedItems';
    let completed = JSON.parse(localStorage.getItem(COMPLETED_KEY)) || [];
    if (!completed.includes(itemId)) {
        completed.push(itemId);
        localStorage.setItem(COMPLETED_KEY, JSON.stringify(completed));
        showToast("Progres telah dicatat!", "success");
        navigateTo('dashboard', document.querySelector('.sidebar-link')); // Kembali ke dasbor
    } else {
        showToast("Item ini sudah selesai.", "info");
    }
}

// =================================================================================
// BAGIAN 5: LOGIKA KUIS (FUNGSI TETAP SAMA, TAPI DIPANGGIL DARI ATAS)
// =================================================================================
let currentQuizData = null;
let currentQuestionIndex = 0;
let userAnswers = [];
let currentExplanationIndex = 0;

function startQuiz(quizId) {
    currentQuizData = allContentData.bankSoal.find(q => q.id === quizId);
    if (!currentQuizData) { showToast('Kuis tidak ditemukan!', 'error'); return; }
    currentQuestionIndex = 0;
    userAnswers = new Array(currentQuizData.questions.length).fill(null);
    renderQuizInterface();
}

function renderQuizInterface() {
    const quiz = currentQuizData;
    const question = quiz.questions[currentQuestionIndex];
    const quizHTML = `<div class="panel max-w-4xl mx-auto"><div class="flex justify-between items-start mb-4"><div><h2 class="text-xl font-bold text-cyan-400">${quiz.title}</h2><p class="text-sm text-gray-400">Pertanyaan ${currentQuestionIndex + 1} dari ${quiz.questions.length}</p></div><button onclick="navigateTo('bank_soal', null)" class="text-xs text-gray-400 hover:text-white">&times; Tutup</button></div><hr class="border-gray-700 my-4"/><div class="mb-6 min-h-[60px]"><div class="text-lg text-gray-200">${question.questionText}</div></div><div id="quiz-options" class="space-y-3">${question.options.map((opt, index) => `<div id="option-${index}" class="quiz-option p-4 rounded-lg cursor-pointer transition-colors" onclick="selectAnswer('${opt.replace(/'/g, "\\'")}', ${index})">${opt}</div>`).join('')}</div><hr class="border-gray-700 my-6"/><div class="flex justify-end"><button id="next-btn" onclick="submitQuiz()" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-6 rounded-lg">${currentQuestionIndex === quiz.questions.length - 1 ? 'Selesai & Lihat Hasil' : 'Lanjut'}</button></div></div>`;
    appContent.innerHTML = quizHTML;
    if (window.MathJax) { MathJax.typeset(); } // <--- TAMBAHKAN INI
}

function selectAnswer(answer, optionIndex) {
    userAnswers[currentQuestionIndex] = answer;
    document.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
    document.getElementById(`option-${optionIndex}`).classList.add('selected');
}

function submitQuiz() {
    if (userAnswers[currentQuestionIndex] === null) { showToast('Silakan pilih jawaban terlebih dahulu!', 'error'); return; }
    if (currentQuestionIndex < currentQuizData.questions.length - 1) { currentQuestionIndex++; renderQuizInterface(); } else { renderQuizResults(); }
}

function renderQuizResults() {
    const quiz = currentQuizData;
    let score = 0;
    quiz.questions.forEach((q, index) => { if (q.correctAnswer === userAnswers[index]) { score++; } });
    
    // Tandai kuis ini sebagai selesai untuk progres keseluruhan
    markAsCompleted(quiz.id);

    // Simpan skor terakhir ke localStorage
    const finalScorePercentage = quiz.questions.length > 0 ? Math.round((score / quiz.questions.length) * 100) : 0;
    const lastScore = {
        title: quiz.title,
        score: score,
        total: quiz.questions.length,
        percentage: finalScorePercentage
    };
    localStorage.setItem('lastQuizScore', JSON.stringify(lastScore));
    
    const resultShellHTML = `<div class="panel max-w-4xl mx-auto"><h2 class="text-2xl font-bold text-center">Hasil Kuis: ${quiz.title}</h2><div class="text-center my-6 bg-gray-900/50 p-4 rounded-lg"><p class="text-gray-400">Skor Akhir Anda</p><p class="text-5xl font-bold text-cyan-400 mt-2">${finalScorePercentage}%</p><p class="text-gray-300 mt-2">(${score} dari ${quiz.questions.length} soal benar)</p></div><h3 id="explanation-title" class="font-bold text-xl mt-10 mb-4 text-center">⭐ Pembahasan Soal</h3><div id="single-explanation-container" class="min-h-[250px]"></div><div class="flex justify-between items-center mt-8 flex-wrap gap-4"><button id="prev-explanation-btn" onclick="prevExplanation()" class="nav-btn bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg"><i class="fa-solid fa-chevron-left"></i> Sebelumnya</button><button onclick="navigateTo('bank_soal', null)" class="bg-cyan-800 hover:bg-cyan-700 text-white text-sm py-2 px-4 rounded-lg">Kembali ke Bank Soal</button><button id="next-explanation-btn" onclick="nextExplanation()" class="nav-btn bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg">Selanjutnya <i class="fa-solid fa-chevron-right"></i></button></div></div>`;
    appContent.innerHTML = resultShellHTML;
    currentExplanationIndex = 0;
    renderSingleExplanation(currentExplanationIndex);
}

function renderSingleExplanation(index) {
    const container = document.getElementById('single-explanation-container');
    const title = document.getElementById('explanation-title');
    const quiz = currentQuizData;
    const q = quiz.questions[index];
    title.innerText = `⭐ Pembahasan Soal ${index + 1} / ${quiz.questions.length}`;
    const explanationHTML = `<div class="bg-gray-900/50 p-4 rounded-lg"><div class="mb-3 text-gray-300 text-lg">${q.questionText}</div><div class="space-y-2 text-sm"><p class="${userAnswers[index] === q.correctAnswer ? 'correct-answer' : 'wrong-answer'} p-2 rounded">Jawaban Anda: ${userAnswers[index] || 'Tidak dijawab'}</p><p class="correct-answer p-2 rounded">Jawaban Benar: ${q.correctAnswer}</p><div class="bg-gray-800 p-3 mt-3 rounded-md"><p class="font-bold text-cyan-300">Pembahasan:</p><p class="text-gray-400 mt-1">${q.explanation}</p></div></div></div>`;
    container.innerHTML = explanationHTML;
    document.getElementById('prev-explanation-btn').disabled = (index === 0);
    document.getElementById('next-explanation-btn').disabled = (index === quiz.questions.length - 1);
    if (window.MathJax) { MathJax.typeset(); } // <--- TAMBAHKAN INI
}

function nextExplanation() { if (currentExplanationIndex < currentQuizData.questions.length - 1) { currentExplanationIndex++; renderSingleExplanation(currentExplanationIndex); } }
function prevExplanation() { if (currentExplanationIndex > 0) { currentExplanationIndex--; renderSingleExplanation(currentExplanationIndex); } }

// =================================================================================
// BAGIAN 6: FUNGSI GLOBAL & INISIALISASI
// =================================================================================
function initializeApp() {
    const firstLink = document.querySelector('.sidebar-link');
    navigateTo('dashboard', firstLink);
}

function showToast(message, type = 'info') { const container = document.getElementById('toast-container'); const toast = document.createElement('div'); const icons = { info: 'fa-solid fa-circle-info', success: 'fa-solid fa-check-circle', error: 'fa-solid fa-triangle-exclamation' }; const colors = { info: 'text-cyan-400', success: 'text-green-400', error: 'text-red-400' }; const iconClass = icons[type] || icons['info']; const colorClass = colors[type] || colors['info']; toast.className = 'toast-in flex items-start p-4 rounded-lg shadow-lg text-sm'; toast.style.backgroundColor = 'var(--bg-panel)'; toast.style.border = '1px solid var(--border-color)'; toast.innerHTML = `<div class="flex-shrink-0"><i class="${iconClass} ${colorClass} text-xl"></i></div><div class="ml-3"><p class="font-bold capitalize ${colorClass}">${type}</p><p class="text-gray-300 mt-1">${message}</p></div>`; container.appendChild(toast); setTimeout(() => { toast.classList.remove('toast-in'); toast.classList.add('toast-out'); toast.addEventListener('animationend', () => { toast.remove(); }); }, 5000); }
</script>

</body>
</html>
